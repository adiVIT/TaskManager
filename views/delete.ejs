<!-- views/delete.ejs -->
<form id="deleteTaskForm" onsubmit="submitDelete('<%= task._id %>'); return false;">
    <button type="submit">Delete</button>
  </form>
  
  <script>
    function submitDelete(taskId) {
      fetch(`/tasks/delete/${taskId}`, {
        method: 'DELETE', // Use DELETE method here
        headers: {
          'Content-Type': 'application/json',
        },
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Failed to delete task');
          }
          return response.json();
        })
        .then(result => {
          console.log(result.message); // Log success message
          window.location.href = '/tasks'; // Redirect to tasks view or update UI dynamically
        })
        .catch(error => {
          console.error('Error deleting task:', error);
        });
    }
  </script>
  
  